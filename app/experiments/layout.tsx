import Link from "next/link";
import * as fs from "fs";
import styles from "./page.module.css";

export const metadata = {
  title: "Next.js",
  description: "Generated by Next.js",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const filePath = "app/experiments";

  const files = fs.readdirSync(filePath, { withFileTypes: true });

  const links = files.map((dirent) => {
    if (!dirent.isDirectory()) {
      return null;
    }

    const name = dirent.name.split("-").join(" ");
    return (
      <Link
        key={dirent.name}
        className={styles.link}
        href={`/experiments/${dirent.name}`}
      >
        {name}
      </Link>
    );
  });

  return (
    <html lang="en">
      <body>
        <div className={styles.linkBlock}>{links}</div>
        {children}
      </body>
    </html>
  );
}
